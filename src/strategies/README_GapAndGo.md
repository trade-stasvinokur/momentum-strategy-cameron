# Gap‚Äëand‚ÄëGo¬†‚Äì –≤–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–æ–±–æ—è –ø–µ—Ä–≤–æ–π —Å–≤–µ—á–∏

**Gap‚Äëand‚ÄëGo**¬†‚Äî HTTP‚Äë—Å–µ—Ä–≤–∏—Å (FastAPI), –∫–æ—Ç–æ—Ä—ã–π *–∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ä—ã–Ω–∫–∞* –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª¬†–ª–∏ –ø—Ä–æ–±–æ–π –º–∞–∫—Å–∏–º—É–º–∞ –ø–µ—Ä–≤–æ–π –º–∏–Ω—É—Ç–Ω–æ–π —Å–≤–µ—á–∏ –≤¬†–ø–µ—Ä–≤—ã–µ¬†5‚ÄØ–º–∏–Ω—É—Ç —Å–µ—Å—Å–∏–∏.

1. –ü–æ–ª—É—á–∞–µ—Ç –º–∏–Ω—É—Ç–Ω—ã–µ —Å–≤–µ—á–∏ (Tinkoff Invest API) –∑–∞ –ø–µ—Ä–≤—ã–µ 5‚ÄØ–º–∏–Ω—É—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–∫–µ—Ä–∞.
2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–≤—É—é —Å–≤–µ—á—É¬†‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –µ—ë OHLC.
3. –ò—â–µ—Ç –ø—Ä–æ–±–æ–π `high` –ø–µ—Ä–≤–æ–π –º–∏–Ω—É—Ç—ã –≤¬†—Å–≤–µ—á–∞—Ö¬†2‚Äë5.
4. –û—Ç–¥–∞—ë—Ç JSON‚Äë–æ—Ç–≤–µ—Ç —Å —É—Ä–æ–≤–Ω—è–º–∏ –≤—Ö–æ–¥–∞/—Å—Ç–æ–ø–∞ –∏ –æ—Ç–º–µ—Ç–∫–æ–π, —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è.

–°–µ—Ä–≤–∏—Å –∂–∏–≤—ë—Ç –≤ Docker‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ª–∏–±–æ –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.

---

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Python¬†‚â•‚ÄØ3.13**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` ‚Üí `.env` –∏ –∑–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```dotenv
# –¢–æ–∫–µ–Ω Tinkoff Invest API
TINKOFF_API_TOKEN=your_token_here
# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Moscow)
TZ=Europe/Moscow
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install uv
```

### 2. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
uv run uvicorn gap_and_go:app --host 0.0.0.0 --port 8002
```

–ü—Ä–æ–≤–µ—Ä—å –∑–∞–ø—Ä–æ—Å–æ–º:

```bash
curl -s "http://localhost:8002/gap-and-go?ticker=VEON-RX&uid=f1374f83-7934-41f7-a210-097ed5beecd5&date=2025-07-28"
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```json
{
  "ticker": "VEON-RX",
  "date": "2025-07-28",
  "first_candle_high": 81.8,
  "first_candle_low": 79.45,
  "triggered": false,
  "entry_price": null,
  "stop_price": null,
  "trigger_time": null
}
```

### 3. –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
docker compose up gap_and_go
```

`docker-compose.yml` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ—Ä–≤–∏—Å **gap_and_go** c –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –ø–æ—Ä—Ç–∞¬†`8002`.

---

## üß∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è            | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é     | –ß—Ç–æ –¥–∞—ë—Ç                           |
| --------------------- | ----------- | ---------------- | ---------------------------------- |
| `TINKOFF_API_TOKEN`   | –¥–∞          | ‚Äî                | –î–æ—Å—Ç—É–ø –∫ Market¬†Data API Tinkoff   |
| `TZ`                  | –Ω–µ—Ç         | `Europe/Moscow`  | –õ–æ–∫–∞–ª—å–Ω–∞—è —Ç–∞–π–∑–æ–Ω–∞ –¥–ª—è –ª–æ–≥–æ–≤        |

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ö–ª–∏–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç¬†`GET /gap-and-go?ticker&uid&date`.
2. –°–µ—Ä–≤–∏—Å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –º–∏–Ω—É—Ç–Ω—ã–µ —Å–≤–µ—á–∏ `CANDLE_INTERVAL_1_MIN` –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ *[–æ—Ç–∫—Ä—ã—Ç–∏–µ;¬†–æ—Ç–∫—Ä—ã—Ç–∏–µ¬†+‚ÄØ5‚ÄØ–º–∏–Ω—É—Ç]*.
3. –ü–µ—Ä–≤–∞—è —Å–≤–µ—á–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
   * `open`, `high`, `low`, `close`
4. –°–≤–µ—á–∏¬†2‚Äë5 –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –ø—Ä–æ–±–æ–π `first_high`.
5. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Pydantic –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É.
6. –í¬†–ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è:
   * OHLC –≤—Å–µ—Ö –ø–µ—Ä–≤—ã—Ö –ø—è—Ç–∏ —Å–≤–µ—á–µ–π;
   * —Ñ–∞–∫—Ç –∏ –≤—Ä–µ–º—è –ø—Ä–æ–±–æ—è –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ *¬´–Ω–µ¬†—Å—Ä–∞–±–æ—Ç–∞–ª–∞¬ª*.

–û—à–∏–±–∫–∏ HTTP‚Äë–∏–ª–∏ Market¬†Data –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —É—Ä–æ–≤–Ω–µ–º `ERROR`.

---

## üóÑÔ∏è –õ–æ–≥–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ü–æ‚Äë—É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å –ø–∏—à–µ—Ç –≤ stdout ‚Üí `docker logs gap_and_go`.  
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `uvicorn` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å, –Ω–∞–ø—Ä–∏–º–µ—Ä `--log-level debug` ‚Äî –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤—Å–µ —Å–≤–µ—á–∏ –∏ –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
gap_and_go/
‚î£ gap_and_go.py          # FastAPI‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚î£ DockerfileGapAndGo     # python:3.13‚Äëslim, ENTRYPOINT ["uv", "run", "uvicorn ..."]
‚îó README.md              # —ç—Ç–æ—Ç —Ñ–∞–π–ª
```

---

### ‚ú® –ì–æ—Ç–æ–≤–æ

–ü–æ—Å–ª–µ `docker compose up` —Å–≤—è–∑–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

* **gap_and_go**¬†‚Äî REST¬†API —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ Gap‚Äëand‚ÄëGo
* **orchestrator**¬†‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–ú–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—Ä–µ–π–¥–∏–Ω–≥‚Äë—Å–∫—Ä–∏–ø—Ç—ã –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ cURL/Postman.
